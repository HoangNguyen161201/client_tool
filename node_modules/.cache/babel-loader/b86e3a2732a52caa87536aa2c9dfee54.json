{"ast":null,"code":"import _objectSpread from\"C:/Users/hoang/OneDrive/M\\xE1y t\\xEDnh/learnWeb/reactjs/memories_project/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import{Link}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as yup from'yup';import inputField from'../../../conFigForm/inputField';import selectField from'../../../conFigForm/selectField';import fileField from'../../../conFigForm/fileField';import{useDispatch as UseDispatch,useSelector as UseSelector}from'react-redux';import{useHistory as UseHistory}from'react-router-dom';import postAction from'../../../redux/actions/index';import fileAction from'../../../redux/actions/file';import{useEffect as UseEffect}from'react';import{POSTFILE,POST}from'../../../api/index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function addPost(){var dispatch=UseDispatch();var history=UseHistory();var getfile=UseSelector(function(state){return state.saveFile;});var getDlCt=UseSelector(function(state){return state.categories;}).data;var check=yup.object({title:yup.string().required('Not null'),link:yup.string().url('It is not the link').required('Not null'),content:yup.string().required('Not null')});UseEffect(function(){dispatch(fileAction.resetFile());},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-0 col-12 col-sm-8 col-lg-6 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'#4a50c0',fontWeight:'500'},className:\"mt-4 text-center fs-4\",children:\"Add new tool\"}),/*#__PURE__*/_jsx(Link,{to:\"/post\",className:\"btn btn-primary\",children:\"Back\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center \",children:/*#__PURE__*/_jsx(Formik,{initialValues:{title:'',content:'',link:'',id_category:'',img:''},validationSchema:check,validate:function validate(value){var error={};if(value.image===''){error.image='Not null';}else{if(!value.img.toLowerCase().endsWith('.png')&&!value.img.toLowerCase().endsWith('.jpg')&&!value.img.toLowerCase().endsWith('.jpeg')&&!value.img.toLowerCase().endsWith('.gif')){error.img='khong phai image';}}return _objectSpread({},error);},onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){var r=new FormData();r.append('file',getfile.file);POSTFILE('/post/create',r);var value1=_objectSpread({},values);value1.img=getfile.file.name;POST('/post/create',value1).then(function(e){dispatch(postAction.getDataSuccess([e]));history.push('/post');});setSubmitting(false);},400);},children:function children(_ref2){var isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/_jsxs(Form,{className:\"p-4 mt-3 border shadow-sm col-12 col-sm-8 col-lg-6 border-primary rounded-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Field,{name:\"title\",type:\"text\",placeholder:\"enter title\",label:\"Title\",component:inputField}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"form-text\",style:{color:'red'},name:\"title\",component:\"small\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\" row row-cols-1 row-cols-sm-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Field,{name:\"link\",type:\"url\",placeholder:\"enter link\",label:\"Link\",component:inputField}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"form-text\",style:{color:'red'},name:\"link\",component:\"small\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Field,{name:\"id_category\",data:getDlCt,label:\"Category\",component:selectField})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",className:\"form-label\",children:\"Content\"}),/*#__PURE__*/_jsx(Field,{component:\"textarea\",className:\"form-control\",name:\"content\",id:\"content\"}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"form-text\",style:{color:'red'},name:\"content\",component:\"small\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Field,{name:\"img\",type:\"file\",id:\"file\",label:\"Insert image\",component:fileField}),/*#__PURE__*/_jsx(ErrorMessage,{className:\"form-text\",style:{color:'red'},name:\"img\",component:\"small\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"mb-2 btn btn-primary\",children:\"Submit\"})]});}})})]})});}export default addPost;","map":{"version":3,"sources":["C:/Users/hoang/OneDrive/Máy tính/learnWeb/reactjs/memories_project/client/src/features/post/pages/addPost.js"],"names":["React","Link","Formik","Form","Field","ErrorMessage","yup","inputField","selectField","fileField","useDispatch","UseDispatch","useSelector","UseSelector","useHistory","UseHistory","postAction","fileAction","useEffect","UseEffect","POSTFILE","POST","addPost","dispatch","history","getfile","state","saveFile","getDlCt","categories","data","check","object","title","string","required","link","url","content","resetFile","color","fontWeight","id_category","img","value","error","image","toLowerCase","endsWith","values","setSubmitting","setTimeout","r","FormData","append","file","value1","name","then","e","getDataSuccess","push","isSubmitting"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,CAA8BC,YAA9B,KAAkD,QAAlD,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,+BAAtB,CACA,OAAQC,WAAW,GAAIC,CAAAA,WAAvB,CAAoCC,WAAW,GAAIC,CAAAA,WAAnD,KAAqE,aAArE,CACA,OAAQC,UAAU,GAAIC,CAAAA,UAAtB,KAAuC,kBAAvC,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,OAASC,SAAS,GAAIC,CAAAA,SAAtB,KAAuC,OAAvC,CACA,OAAQC,QAAR,CAAkBC,IAAlB,KAA6B,oBAA7B,C,wFACA,QAASC,CAAAA,OAAT,EAAmB,CACf,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,GAAMU,CAAAA,OAAO,CAAGZ,WAAW,CAAC,SAAAa,KAAK,QAAEA,CAAAA,KAAK,CAACC,QAAR,EAAN,CAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGf,WAAW,CAAC,SAAAa,KAAK,QAAEA,CAAAA,KAAK,CAACG,UAAR,EAAN,CAAX,CAAqCC,IAArD,CAGA,GAAMC,CAAAA,KAAK,CAAGzB,GAAG,CAAC0B,MAAJ,CAAW,CACrBC,KAAK,CAAE3B,GAAG,CAAC4B,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CADc,CAErBC,IAAI,CAAE9B,GAAG,CAAC4B,MAAJ,GAAaG,GAAb,CAAiB,oBAAjB,EAAuCF,QAAvC,CAAgD,UAAhD,CAFe,CAGrBG,OAAO,CAAEhC,GAAG,CAAC4B,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAHY,CAAX,CAAd,CAMAhB,SAAS,CAAC,UAAI,CACVI,QAAQ,CAACN,UAAU,CAACsB,SAAX,EAAD,CAAR,CACH,CAFQ,CAEP,EAFO,CAAT,CAGA,mBACI,YAAK,SAAS,CAAC,cAAf,uBACI,aAAK,SAAS,CAAC,cAAf,wBAEI,YAAK,SAAS,CAAC,6BAAf,uBACI,aAAK,SAAS,CAAC,gFAAf,wBACI,UAAG,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAAoBC,UAAU,CAAE,KAAhC,CAAV,CAAmD,SAAS,CAAC,uBAA7D,0BADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,CAAiB,SAAS,CAAC,iBAA3B,kBAFJ,GADJ,EAFJ,cAQI,YAAK,SAAS,CAAC,6BAAf,uBACI,KAAC,MAAD,EACI,aAAa,CAAE,CACXR,KAAK,CAAE,EADI,CAEXK,OAAO,CAAE,EAFE,CAGXF,IAAI,CAAE,EAHK,CAIXM,WAAW,CAAE,EAJF,CAKXC,GAAG,CAAE,EALM,CADnB,CAQI,gBAAgB,CAAIZ,KARxB,CASI,QAAQ,CAAI,kBAAAa,KAAK,CAAE,CACf,GAAMC,CAAAA,KAAK,CAAG,EAAd,CACA,GAAGD,KAAK,CAACE,KAAN,GAAgB,EAAnB,CAAsB,CAClBD,KAAK,CAACC,KAAN,CAAc,UAAd,CACH,CAFD,IAGI,CACA,GACI,CAACF,KAAK,CAACD,GAAN,CAAUI,WAAV,GAAwBC,QAAxB,CAAiC,MAAjC,CAAD,EACA,CAACJ,KAAK,CAACD,GAAN,CAAUI,WAAV,GAAwBC,QAAxB,CAAiC,MAAjC,CADD,EAEA,CAACJ,KAAK,CAACD,GAAN,CAAUI,WAAV,GAAwBC,QAAxB,CAAiC,OAAjC,CAFD,EAGA,CAACJ,KAAK,CAACD,GAAN,CAAUI,WAAV,GAAwBC,QAAxB,CAAiC,MAAjC,CAJL,CAMC,CACGH,KAAK,CAACF,GAAN,CAAY,kBAAZ,CACH,CACJ,CACD,wBACOE,KADP,EAGH,CA5BL,CA6BI,QAAQ,CAAE,kBAACI,MAAD,MAA+B,IAApBC,CAAAA,aAAoB,MAApBA,aAAoB,CACrCC,UAAU,CAAC,UAAM,CAEb,GAAMC,CAAAA,CAAC,CAAG,GAAIC,CAAAA,QAAJ,EAAV,CACAD,CAAC,CAACE,MAAF,CAAS,MAAT,CAAgB7B,OAAO,CAAC8B,IAAxB,EACAnC,QAAQ,CAAC,cAAD,CAAgBgC,CAAhB,CAAR,CACA,GAAII,CAAAA,MAAM,kBAAOP,MAAP,CAAV,CACAO,MAAM,CAACb,GAAP,CAAalB,OAAO,CAAC8B,IAAR,CAAaE,IAA1B,CACApC,IAAI,CAAC,cAAD,CAAgBmC,MAAhB,CAAJ,CAA4BE,IAA5B,CAAiC,SAAAC,CAAC,CAAE,CAChCpC,QAAQ,CAACP,UAAU,CAAC4C,cAAX,CAA0B,CAACD,CAAD,CAA1B,CAAD,CAAR,CACAnC,OAAO,CAACqC,IAAR,CAAa,OAAb,EACH,CAHD,EAIAX,aAAa,CAAC,KAAD,CAAb,CACH,CAZS,CAYP,GAZO,CAAV,CAaH,CA3CL,UA6CK,4BAAGY,CAAAA,YAAH,OAAGA,YAAH,oBACG,MAAC,IAAD,EAAM,SAAS,CAAC,6EAAhB,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,MAAzB,CAAgC,WAAW,CAAC,aAA5C,CAA0D,KAAK,CAAC,OAAhE,CAAwE,SAAS,CAAEvD,UAAnF,EADJ,cAEI,KAAC,YAAD,EAAc,SAAS,CAAC,WAAxB,CAAoC,KAAK,CAAE,CAACiC,KAAK,CAAE,KAAR,CAA3C,CAA2D,IAAI,CAAC,OAAhE,CAAwE,SAAS,CAAC,OAAlF,EAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,+BAAf,wBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,KAAxB,CAA8B,WAAW,CAAC,YAA1C,CAAuD,KAAK,CAAC,MAA7D,CAAoE,SAAS,CAAEjC,UAA/E,EADJ,cAEI,KAAC,YAAD,EAAc,SAAS,CAAC,WAAxB,CAAoC,KAAK,CAAE,CAACiC,KAAK,CAAE,KAAR,CAA3C,CAA2D,IAAI,CAAC,MAAhE,CAAuE,SAAS,CAAC,OAAjF,EAFJ,GADJ,EADJ,cAOI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,MAAf,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,aAAZ,CAA0B,IAAI,CAAEZ,OAAhC,CAAyC,KAAK,CAAC,UAA/C,CAA0D,SAAS,CAAEpB,WAArE,EADJ,EADJ,EAPJ,GALJ,cAkBI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,SAAf,CAAyB,SAAS,CAAC,YAAnC,qBADJ,cAEI,KAAC,KAAD,EAAO,SAAS,CAAC,UAAjB,CAA4B,SAAS,CAAC,cAAtC,CAAqD,IAAI,CAAC,SAA1D,CAAoE,EAAE,CAAC,SAAvE,EAFJ,cAGI,KAAC,YAAD,EAAc,SAAS,CAAC,WAAxB,CAAoC,KAAK,CAAE,CAACgC,KAAK,CAAE,KAAR,CAA3C,CAA2D,IAAI,CAAC,SAAhE,CAA0E,SAAS,CAAC,OAApF,EAHJ,GAlBJ,cAuBI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,KAAD,EAAO,IAAI,CAAC,KAAZ,CAAkB,IAAI,CAAC,MAAvB,CAA8B,EAAE,CAAC,MAAjC,CAAwC,KAAK,CAAC,cAA9C,CAA6D,SAAS,CAAE/B,SAAxE,EADJ,cAEI,KAAC,YAAD,EAAc,SAAS,CAAC,WAAxB,CAAoC,KAAK,CAAE,CAAC+B,KAAK,CAAE,KAAR,CAA3C,CAA2D,IAAI,CAAC,KAAhE,CAAsE,SAAS,CAAC,OAAhF,EAFJ,GAvBJ,cA2BI,eAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,CAAEsB,YAAhC,CAA8C,SAAS,CAAC,sBAAxD,oBA3BJ,GADH,EA7CL,EADJ,EARJ,GADJ,EADJ,CA6FH,CACD,cAAexC,CAAAA,OAAf","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport * as yup from 'yup';\r\nimport inputField from '../../../conFigForm/inputField';\r\nimport selectField from '../../../conFigForm/selectField';\r\nimport fileField from '../../../conFigForm/fileField';\r\nimport {useDispatch as UseDispatch, useSelector as UseSelector} from 'react-redux';\r\nimport {useHistory as UseHistory} from 'react-router-dom';\r\nimport postAction from '../../../redux/actions/index';\r\nimport fileAction from '../../../redux/actions/file';\r\nimport { useEffect as UseEffect } from 'react';\r\nimport {POSTFILE, POST} from '../../../api/index';\r\nfunction addPost() {\r\n    const dispatch = UseDispatch();\r\n    const history = UseHistory();\r\n    const getfile = UseSelector(state=>state.saveFile);\r\n    const getDlCt = UseSelector(state=>state.categories).data;\r\n\r\n\r\n    const check = yup.object({\r\n        title: yup.string().required('Not null'),\r\n        link: yup.string().url('It is not the link').required('Not null'),\r\n        content: yup.string().required('Not null'),\r\n    });\r\n\r\n    UseEffect(()=>{\r\n        dispatch(fileAction.resetFile());\r\n    },[]);\r\n    return (\r\n        <div className='container-sm'>\r\n            <div className='container-sm'>\r\n\r\n                <div className='row justify-content-center '>\r\n                    <div className='p-0 col-12 col-sm-8 col-lg-6 d-flex justify-content-between align-items-center'>\r\n                        <p style={{ color: '#4a50c0', fontWeight: '500' }} className='mt-4 text-center fs-4'>Add new tool</p>\r\n                        <Link to='/post' className='btn btn-primary'>Back</Link>\r\n                    </div>\r\n                </div>\r\n                <div className='row justify-content-center '>\r\n                    <Formik\r\n                        initialValues={{\r\n                            title: '',\r\n                            content: '',\r\n                            link: '',\r\n                            id_category: '',\r\n                            img: ''\r\n                        }}\r\n                        validationSchema = {check}\r\n                        validate = {value=>{\r\n                            const error = {};\r\n                            if(value.image === ''){\r\n                                error.image = 'Not null'\r\n                            }\r\n                            else{\r\n                                if(\r\n                                    !value.img.toLowerCase().endsWith('.png') &&\r\n                                    !value.img.toLowerCase().endsWith('.jpg') &&\r\n                                    !value.img.toLowerCase().endsWith('.jpeg') &&\r\n                                    !value.img.toLowerCase().endsWith('.gif')\r\n\r\n                                ){\r\n                                    error.img = 'khong phai image'\r\n                                }\r\n                            }\r\n                            return {\r\n                                ...error\r\n                            }\r\n                        }}\r\n                        onSubmit={(values, { setSubmitting }) => {\r\n                            setTimeout(() => {\r\n\r\n                                const r = new FormData();\r\n                                r.append('file',getfile.file);\r\n                                POSTFILE('/post/create',r);\r\n                                var value1 = {...values};\r\n                                value1.img = getfile.file.name;\r\n                                POST('/post/create',value1).then(e=>{\r\n                                    dispatch(postAction.getDataSuccess([e]));\r\n                                    history.push('/post');\r\n                                });\r\n                                setSubmitting(false);\r\n                            }, 400);\r\n                        }}\r\n                    >\r\n                        {({ isSubmitting }) => (\r\n                            <Form className='p-4 mt-3 border shadow-sm col-12 col-sm-8 col-lg-6 border-primary rounded-2'>\r\n                                <div className=\"mb-3\">\r\n                                    <Field name='title' type='text' placeholder='enter title' label='Title' component={inputField} />\r\n                                    <ErrorMessage className=\"form-text\" style={{color: 'red'}} name='title' component='small'/>\r\n                                </div>\r\n                                <div className=\" row row-cols-1 row-cols-sm-2\">\r\n                                    <div className='col'>\r\n                                        <div className=\"mb-3\">\r\n                                            <Field name='link' type='url' placeholder='enter link' label='Link' component={inputField} />\r\n                                            <ErrorMessage className=\"form-text\" style={{color: 'red'}} name='link' component='small'/>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className='col'>\r\n                                        <div className=\"mb-3\">\r\n                                            <Field name='id_category' data={getDlCt} label='Category' component={selectField} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mb-3\">\r\n                                    <label htmlFor=\"content\" className=\"form-label\">Content</label>\r\n                                    <Field component='textarea' className=\"form-control\" name='content' id='content' />\r\n                                    <ErrorMessage className=\"form-text\" style={{color: 'red'}} name='content' component='small'/>\r\n                                </div>\r\n                                <div className=\"mb-3\">\r\n                                    <Field name='img' type='file' id='file' label='Insert image' component={fileField} />\r\n                                    <ErrorMessage className=\"form-text\" style={{color: 'red'}} name='img' component='small'/>\r\n                                </div>\r\n                                <button type=\"submit\" disabled={isSubmitting} className=\"mb-2 btn btn-primary\">Submit</button>\r\n                            </Form>\r\n\r\n                        )}\r\n                    </Formik>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default addPost\r\n\r\n"]},"metadata":{},"sourceType":"module"}